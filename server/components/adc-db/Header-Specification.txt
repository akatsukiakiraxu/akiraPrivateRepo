# データファイルヘッダ 仕様書

## バイトオーダー

データファイルのバイトオーダーは、常にLSBファーストとする。


## ヘッダの構成

* マジックナンバー 4byte整数 offset=0
* ヘッダ長 4byte整数 offset=4
* 測定データ長 8byte整数 offset=8
* 測定開始時刻 4byte整数 offset=16
* フラグ 4byte整数 offset=20
* チャネル番号 4byte整数 offset=24
* 品番 4byte整数 offset=28
* パレット番号 4byte整数 offset=32
* 位置番号 4byte整数 offset=36
* データエラーカウント 4byte整数 offset=40
* FFTエラーカウント 4byte整数 offset=44


### マジックナンバー

32bit整数型。常に、0xADCDBが格納される。
将来のバージョンアップ時に、バイトオーダーの判定に用いることを想定している。

### ヘッダ長

32bit整数型。常に、40が格納される。
本フィールドは、次のフィールドである測定データ長フィールド以降のヘッダの長さを表し、将来のバージョンアップ時に値を増加させることを想定している。

### 測定データ長

64bit整数型。ファイルのバイト長から、44を減じた値が格納される。
現バージョンでは、測定データの後ろに何らかのデータを追加することを許可していない。

### 測定開始時刻

32bit整数型。
データの測定を開始したUNIX時刻が格納される。

### フラグ

32bit整数型。
各ビットは、次の意味を持つ。

* bit0: オーバーフロー発生の有無
* bit1~32: 予約

### チャネル番号

32bit整数型。
チャネル番号から1を減じた値が格納される。

### 品番

32bit整数型。
品番が格納される。

### パレット番号

32bit整数型。
パレット番号が格納される。

### 位置番号

32bit整数型。
位置番号が格納される。

### データエラーカウント

32bit整数型。
通常の期待値比較で発生した外れ値の数が記録される。
異常値検出回数が2^32-1回以上になった場合、2^32-1が記録される。

### FFTエラーカウント

32bit整数型。
FFT期待値比較で発生した外れ値の数が記録される。
異常値検出回数が2^32-1回以上になった場合、2^32-1が記録される。
